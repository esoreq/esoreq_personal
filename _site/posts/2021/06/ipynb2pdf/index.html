

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Staying sane while converting a notebook to pdf - Eyal Soreq</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Eyal Soreq">
<meta property="og:title" content="Staying sane while converting a notebook to pdf">


  <link rel="canonical" href="http://localhost:4000/posts/2021/06/ipynb2pdf/">
  <meta property="og:url" content="http://localhost:4000/posts/2021/06/ipynb2pdf/">



  <meta property="og:description" content="Staying sane while converting a notebook to pdf">



  <meta name="twitter:site" content="@e_soreq">
  <meta name="twitter:title" content="Staying sane while converting a notebook to pdf">
  <meta name="twitter:description" content="Staying sane while converting a notebook to pdf">
  <meta name="twitter:url" content="http://localhost:4000/posts/2021/06/ipynb2pdf/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2021-06-15T00:00:00-07:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Eyal Soreq",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Eyal Soreq Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="http://localhost:4000/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="http://localhost:4000/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="http://localhost:4000/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="http://localhost:4000/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="http://localhost:4000/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="http://localhost:4000/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="http://localhost:4000/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="http://localhost:4000/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="http://localhost:4000/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="http://localhost:4000/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.css"/>

<script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script>

<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/">Eyal Soreq</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/teaching/">Teaching</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/year-archive/">Blog Posts</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="http://localhost:4000/images/profile.png" class="author__avatar" alt="Eyal Soreq Ph.D.">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Eyal Soreq Ph.D.</h3>
    <p class="author__bio">I apply and develop machine learning and data science methods to improve our understanding of dementia related behavioral patterns</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
      
      
      
      
       
      
        <li><a href="https://twitter.com/e_soreq"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
      
      
      
      
      
        <li><a href="https://github.com/esoreq"><i class="fab fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://scholar.google.com/citations?view_op=list_works&hl=en&user=_COL8loAAAAJ"><i class="fas fa-fw fa-graduation-cap"></i> Google Scholar</a></li>
      
      
        <li><a href="https://pubmed.ncbi.nlm.nih.gov/?term=Soreq+E&sort=pubdate"><i class="ai ai-pubmed-square ai-fw"></i> PubMed</a></li>
      
      
        <li><a href="https://orcid.org/0000-0003-4809-4889"><i class="ai ai-orcid-square ai-fw"></i> ORCID</a></li>
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Staying sane while converting a notebook to pdf">
    <meta itemprop="description" content="Staying sane while converting a notebook to pdf">
    <meta itemprop="datePublished" content="June 15, 2021">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Staying sane while converting a notebook to pdf
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  15 minute read
	
</p>
          
        
        
        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2021-06-15T00:00:00-07:00">June 15, 2021</time></p>
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
        <h1 id="staying-sane-while-converting-a-notebook-to-pdf">Staying sane while converting a notebook to pdf</h1>

<h2 id="why-export-a-notebook-to-pdf">Why export a notebook to pdf</h2>

<p>Often, a descriptive report is written by the researcher as part of a process, and there is no definitive audience, despite the researcher’s capability to point to potential future directions at the beginning or end of the report. Since the main purpose of a descriptive report is to present an overview of the object of study, the report must convey all necessary information in an easy-to-understand form, not forgetting the reliability of the findings and the area of validity, which is common to the overall  population of the study. A reader should always be able to investigate the reliability of results, which means the report should contain all the pertinent data for this assessment, including the general sources of criticism, the type and distribution of data, and if applicable the significance level of preliminary tests. Descriptive reports cannot be assumed to immediately convey the true value of the study. Instead, it is entirely possible that the researcher is presenting to the public something it does not yet realize needs to be addressed. Therefore, you should create a report that captures the reader’s attention and keeps it until the very end.</p>

<p>Reports tend to change a lot throughout different stages of a project, starting out minimal, but getting more and more comprehensive as the project ends and you have a more focused goal and problem to solve. In this sense, it makes sense to create an automatic report structure that can change  and adapt without much effort from the creator.</p>

<h1 id="how-to-export-a-notebook-to-pdf">How to export a notebook to pdf</h1>
<ul>
  <li>In order to create a PDF file from a notebook that contains some information, you can simply open the file menu and select export notebook as pdf</li>
  <li>However, this export cannot be considered a scientific report, as it lacks much of the structure and form expected from one.</li>
  <li>Fortunately, we can configure jupyter to produce polished reports with little effort, so we can produce reports at any point in the project cycle with one command</li>
</ul>

<h1 id="creating-a-reproducible-notebook-to-pdf-export">Creating a reproducible notebook to pdf export</h1>

<ul>
  <li>To create a reproducible pdf export, you need to generate a templete file that contains all the information needed to produce such a report.</li>
  <li>We will be using a software called <a href="https://nbconvert.readthedocs.io/en/latest/">nbconvert</a> to manage our conversion from jupyter to pdf, under the hood it uses a package that is called <a href="https://jinja.palletsprojects.com/en/3.0.x/">Jinja</a> that converts that Jupyter notebook into a <a href="https://www.latex-project.org/">LATEX</a> file</li>
  <li>The latex file is then converted to pdf using another software called <a href="https://pandoc.org/">pandoc</a></li>
  <li>It is important to note that these templete files can become complex and I am just providing you with a simple working example here</li>
  <li>To produce such a template file we will run the following cell</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">%%</span><span class="n">writefile</span> <span class="s">'my_pdf_template.tex.j2'</span>
<span class="p">((</span><span class="o">*-</span> <span class="n">extends</span> <span class="s">'latex/style_jupyter.tex.j2'</span> <span class="o">-*</span><span class="p">))</span>

<span class="p">((</span><span class="o">*</span> <span class="n">block</span> <span class="n">docclass</span> <span class="o">*</span><span class="p">))</span>
  \<span class="n">documentclass</span><span class="p">[</span><span class="mi">12</span><span class="n">pt</span><span class="p">]{</span><span class="n">article</span><span class="p">}</span>
<span class="p">((</span><span class="o">*</span> <span class="n">endblock</span> <span class="n">docclass</span> <span class="o">*</span><span class="p">))</span>

<span class="p">((</span><span class="o">*</span> <span class="n">block</span> <span class="n">packages</span> <span class="o">*</span><span class="p">))</span>
<span class="p">(((</span> <span class="nb">super</span><span class="p">()</span> <span class="p">)))</span> <span class="o">%</span> <span class="n">load</span> <span class="nb">all</span> <span class="n">other</span> <span class="n">packages</span>
\<span class="n">usepackage</span><span class="p">{</span><span class="n">authblk</span><span class="p">}</span>
<span class="p">((</span><span class="o">*</span> <span class="n">endblock</span> <span class="n">packages</span> <span class="o">*</span><span class="p">))</span>

<span class="p">((</span><span class="o">*</span> <span class="n">block</span> <span class="n">margins</span> <span class="o">*</span><span class="p">))</span>
\<span class="n">geometry</span><span class="p">{</span><span class="n">verbose</span><span class="p">,</span><span class="n">tmargin</span><span class="o">=</span><span class="mi">1</span><span class="ow">in</span><span class="p">,</span><span class="n">bmargin</span><span class="o">=</span><span class="mi">1</span><span class="ow">in</span><span class="p">,</span><span class="n">lmargin</span><span class="o">=</span><span class="mf">0.75</span><span class="ow">in</span><span class="p">,</span><span class="n">rmargin</span><span class="o">=</span><span class="mf">0.75</span><span class="ow">in</span><span class="p">}</span>
<span class="p">((</span><span class="o">*</span> <span class="n">endblock</span> <span class="n">margins</span> <span class="o">*</span><span class="p">))</span>

<span class="p">((</span><span class="o">*</span> <span class="n">block</span> <span class="n">title</span> <span class="o">-*</span><span class="p">))</span>
<span class="p">(((</span> <span class="nb">super</span><span class="p">()</span> <span class="p">)))</span> <span class="o">%</span> <span class="n">load</span> <span class="nb">all</span> <span class="n">other</span> <span class="n">packages</span>
\<span class="n">title</span><span class="p">{</span><span class="n">Composition</span> <span class="n">of</span> <span class="n">a</span> <span class="n">Reproducible</span> <span class="n">Descriptive</span> <span class="n">Report</span><span class="p">}</span>
<span class="p">((</span><span class="o">*-</span> <span class="n">endblock</span> <span class="n">title</span> <span class="o">*</span><span class="p">))</span>

<span class="p">((</span><span class="o">*</span> <span class="n">block</span> <span class="n">date</span> <span class="o">*</span><span class="p">))</span>
\<span class="n">date</span><span class="p">{</span>\<span class="n">today</span><span class="p">}</span>
<span class="p">((</span><span class="o">*</span> <span class="n">endblock</span> <span class="n">date</span> <span class="o">*</span><span class="p">))</span>
    
<span class="p">((</span><span class="o">*</span> <span class="n">block</span> <span class="n">author</span> <span class="o">*</span><span class="p">))</span>
\<span class="n">author</span><span class="p">[</span><span class="mi">1</span><span class="p">]{</span><span class="n">Eyal</span> <span class="n">Soreq</span><span class="o">+</span><span class="p">}</span>
\<span class="n">author</span><span class="p">[</span><span class="mi">2</span><span class="p">]{</span><span class="n">Also</span> <span class="n">Eyal</span> <span class="n">Soreq</span><span class="p">}</span>
\<span class="n">affil</span><span class="p">[</span><span class="mi">1</span><span class="p">]{</span><span class="n">UK</span> <span class="n">Dementia</span> <span class="n">Research</span> <span class="n">Institute</span><span class="p">,</span> <span class="n">Care</span> <span class="n">Research</span> \<span class="o">&amp;</span> <span class="n">Technology</span> <span class="n">Center</span> <span class="mi">929</span> <span class="n">Sir</span> <span class="n">Michael</span> <span class="n">Uren</span> <span class="n">Research</span> <span class="n">Hub</span><span class="p">,</span> <span class="n">London</span><span class="p">}</span>
\<span class="n">affil</span><span class="p">[</span><span class="mi">2</span><span class="p">]{</span><span class="n">Department</span> <span class="n">of</span> <span class="n">Brain</span> <span class="n">Sciences</span> <span class="p">,</span> <span class="n">Imperial</span> <span class="n">College</span> <span class="n">London</span><span class="p">}</span>
<span class="p">((</span><span class="o">*</span> <span class="n">endblock</span> <span class="n">author</span> <span class="o">*</span><span class="p">))</span>

<span class="p">((</span><span class="o">*</span> <span class="n">block</span> <span class="n">maketitle</span> <span class="o">*</span><span class="p">))</span>
    \<span class="n">maketitle</span>
    \<span class="n">tableofcontents</span>
    \<span class="n">pagebreak</span>
<span class="p">((</span><span class="o">*</span> <span class="n">endblock</span> <span class="n">maketitle</span> <span class="o">*</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Overwriting my_pdf_template.tex.j2
</code></pre></div></div>

<h4 id="lets-unpack-the-structure">Let’s unpack the structure</h4>

<ol>
  <li><code class="language-plaintext highlighter-rouge">((*- extends 'latex/style_jupyter.tex.j2' -*))</code> tells the software to use an existing template that was written by the nbconvert team to parse the content of the notebook into the latex format</li>
  <li><code class="language-plaintext highlighter-rouge">((* block &lt;some word&gt; *)) ... ((* endblock &lt;some word&gt; *))</code> creates a call that tells Jinja to find the contents of a block and replace it with your content</li>
  <li>` \documentclass[12pt]{article}` defines the type of document you wish to create (see <a href="https://www.overleaf.com/learn/latex/Creating_a_document_in_LaTeX">Creating_a_document_in_LaTeX</a>)</li>
  <li>Similar to Python, Latex has many packages created by users in the Latex community. Here for example we are loading <a href="https://ctan.org/pkg/authblk?lang=en">authblk</a> to have more flexibility in author creation. Under the hood many other packages are loaded.</li>
  <li><code class="language-plaintext highlighter-rouge">((* block margins *))</code> are the way in which we can define the final report papaer margins</li>
  <li><code class="language-plaintext highlighter-rouge">\title{Composition of a Reproducible Descriptive Report}</code> is a pure latex command decalring the name of the title as a variable of the document</li>
  <li><code class="language-plaintext highlighter-rouge">((* block date *))</code> creates a variable of type data that updates it to today</li>
  <li><code class="language-plaintext highlighter-rouge">((* block author *))</code> deffines authors and affiliation</li>
  <li>The <code class="language-plaintext highlighter-rouge">((* block maketitle *))</code> uses a Latex function to create a title page using the variables you defined previously using the <code class="language-plaintext highlighter-rouge">\maketitle</code> command</li>
  <li>We also include table of contents using the command <code class="language-plaintext highlighter-rouge">\tableofcontents</code></li>
  <li>And we finish with a <code class="language-plaintext highlighter-rouge">\pagebreak</code> command to differentiate the rest of the report from this part</li>
</ol>

<h2 id="using-the-template-file">Using the template file</h2>

<p>The simplest way to use this template is by creating a configuration file that defines it and allows additional parameters to be defined, which we will not cover in this tutorial.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">%%</span><span class="n">capture</span>
<span class="o">%%</span><span class="n">writefile</span> <span class="s">'cfg.py'</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
<span class="n">c</span><span class="p">.</span><span class="n">NbConvertApp</span><span class="p">.</span><span class="n">export_format</span> <span class="o">=</span> <span class="s">'pdf'</span>
<span class="n">c</span><span class="p">.</span><span class="n">TemplateExporter</span><span class="p">.</span><span class="n">extra_template_basedirs</span> <span class="o">=</span> <span class="p">[</span><span class="s">'.'</span><span class="p">]</span>
<span class="n">c</span><span class="p">.</span><span class="n">Exporter</span><span class="p">.</span><span class="n">template_file</span> <span class="o">=</span> <span class="s">'my_pdf_template.tex.j2'</span>
</code></pre></div></div>

<p>We are creating a configuration file which can be used to control various processes that require specific variables. You can read more about how this works <a href="https://ipython.org/ipython-doc/3/development/config.html">here</a>.</p>

<h1 id="bringing-it-all-together">Bringing it all together</h1>

<p>Before we can export anything we need some content to include in the report 
At the end of this course you are expected to produce a Reproducible Report containing some novel material produced by you representing your journy in the course.</p>

<h2 id="composition-of-a-basic-reproducible-report">Composition of a Basic Reproducible Report</h2>

<p>Formally, a research report usually consists of the following parts:</p>

<ol>
  <li>Title page</li>
  <li>Abstract</li>
  <li>Table of contents</li>
  <li>Introduction</li>
  <li>Methods</li>
  <li>Results</li>
  <li>Discussion/Conclusion</li>
  <li>Bibliography</li>
</ol>

<h2 id="the-title-page">The Title Page</h2>

<ul>
  <li>Other then the the title this page contains
    <ul>
      <li>The name of the author or authors</li>
      <li>Their current affiliation</li>
      <li>And, the date in which the report was generated</li>
    </ul>
  </li>
  <li>Sometimes it will also include the table of contents</li>
</ul>

<h2 id="abstract">Abstract</h2>

<p>The abstract of a report is usually a paragraph up to 300 words long summarizing the main points in the  following order:</p>

<ol>
  <li>The goal of your study and the research question(s) you examined</li>
  <li>A description of the study’s design</li>
  <li>Major findings or trends that you discovered</li>
  <li>A brief summary of your interpretations and conclusions</li>
</ol>

<p>Then we use the display IPython function along with the Latex function to render a Latex box in the output. Additionally, I use a new formatting method that differs from the <code class="language-plaintext highlighter-rouge">f-strings</code> we used before. 
Here, we are just instructing Python not to process special characters, so the forward slash and  curly brackets are not processed, and we can write pure text that latex can interpret.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">display</span><span class="p">(</span><span class="n">Latex</span><span class="p">(</span><span class="sa">r</span><span class="s">'''
\begin{abstract}
Insert ABSTRACT here according to subheadings and structure below;
general rules of thumb for abstract writing: 
should be 250-300 words long: 
use active voice but avoid “we did” or “we found”; 
numbers over 10 do not need spelling out at the start of sentences;
sentences starting with a number do not require a capital letter;
p-values should always be accompanied by supporting data
denominators should be given for percentages
abstracts do not need references 
\end{abstract}
'''</span><span class="p">))</span>
</code></pre></div></div>

<p>This method can be used to inject any latex box in theory.</p>

<h1 id="moving-to-the-introduction">Moving to the introduction</h1>

<p>Next, we will include some text using the Markdown heading structure we covered in the  bootcamp. This will usually be some expansion of the first sections of the abstract.</p>

<p>Introductions take readers from general to specific. In it, we summarize what’s known about the topic, set the scope, context, and importance of the research. A problem, accompanied by a hypothesis or a series of questions, explaining briefly how the method works, is the purpose of the work. You could also describe how your paper will be organized, and describe what your study might find out.</p>

<p>Exploratory research (sometimes called hypothesis generating) is about finding how variables influence each other. This approach means the researcher doesn’t have any preconceived ideas or assumptions.<br />
A confirmatory study (also known as hypothesis testing) is one in which the researcher has a pretty clear idea about the relationship between variables. Here, the researcher is trying to find out if a theory, or hypotheses, is supported by data.</p>

<p>The same data can be viewed from different angles, but as datasets become more complex (i.e. more factors are present), it is very challenging to conduct pure exploratory research and some expectations should exist about strong relationships previously described in the literature.</p>

<p>Therefore, in the introduction, it is common to cite previous works in order to put your own questions and ideas in context. When you constantly have to change or adapt the way your referencing looks and feels, this can be a painful experience. Thanks to the framework I’m showing you, this whole process becomes transparent: you just have to add four lines to your template file and create an external file containing your references.</p>

<h2 id="adding-the-bibliography-block">Adding the bibliography block</h2>
<p>In our new template, we are providing explicit bibliographic referencing style in the text, as well as an end-of-report reference section.</p>

<p>The following code appends a <code class="language-plaintext highlighter-rouge">((* block bibliography *))</code> to our template file (notice we added the -a option to append to the file):</p>

<p>The block contains <code class="language-plaintext highlighter-rouge">\bibliographystyle{unsrt}</code> where we declare the style of the bibliography, and <code class="language-plaintext highlighter-rouge">\bibliography{ref}</code> where we point the notebook to a reference file.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">%%</span><span class="n">capture</span>
<span class="o">%%</span><span class="n">writefile</span> <span class="o">-</span><span class="n">a</span> <span class="s">'my_pdf_template.tex.j2'</span>

<span class="p">((</span><span class="o">*</span> <span class="n">block</span> <span class="n">bibliography</span> <span class="o">*</span><span class="p">))</span>
\<span class="n">bibliographystyle</span><span class="p">{</span><span class="n">unsrt</span><span class="p">}</span>
\<span class="n">bibliography</span><span class="p">{</span><span class="n">ref</span><span class="p">}</span>
<span class="p">((</span><span class="o">*</span> <span class="n">endblock</span> <span class="n">bibliography</span> <span class="o">*</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="next-we-need-to-create-the-reference-file">Next we need to create the reference file</h2>
<p>Citing references with BibTeX is easy. All citations and references are automatically formatted in a style of your choice, so you only have to type them once.
BibTeX references are stored in a simple, plain-text file with a <code class="language-plaintext highlighter-rouge">bib</code> suffix. 
If you want to know more check the Overleaf page  <a href="https://www.overleaf.com/learn/latex/Bibliography_management_with_bibtex">Bibliography_management_with_bibtex</a>.</p>

<p>You can find citations easily by using Pubmed, Google Scholar, or another reference search engine. You can just copy and paste to add any citation to your ref.bib file as I do in the next cell:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">%%</span><span class="n">capture</span>
<span class="o">%%</span><span class="n">writefile</span> <span class="s">'ref.bib'</span>

<span class="o">@</span><span class="n">article</span><span class="p">{</span><span class="n">rule2018ten</span><span class="p">,</span>
  <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="n">Ten</span> <span class="n">simple</span> <span class="n">rules</span> <span class="k">for</span> <span class="n">reproducible</span> <span class="n">research</span> <span class="ow">in</span> <span class="n">Jupyter</span> <span class="n">notebooks</span><span class="p">},</span>
  <span class="n">author</span><span class="o">=</span><span class="p">{</span><span class="n">Rule</span><span class="p">,</span> <span class="n">Adam</span> <span class="ow">and</span> <span class="n">Birmingham</span><span class="p">,</span> <span class="n">Amanda</span> <span class="ow">and</span> <span class="n">Zuniga</span><span class="p">,</span> <span class="n">Cristal</span> <span class="ow">and</span> <span class="n">Altintas</span><span class="p">,</span> <span class="n">Ilkay</span> <span class="ow">and</span> <span class="n">Huang</span><span class="p">,</span> <span class="n">Shih</span><span class="o">-</span><span class="n">Cheng</span> <span class="ow">and</span> <span class="n">Knight</span><span class="p">,</span> <span class="n">Rob</span> <span class="ow">and</span> <span class="n">Moshiri</span><span class="p">,</span> <span class="n">Niema</span> <span class="ow">and</span> <span class="n">Nguyen</span><span class="p">,</span> <span class="n">Mai</span> <span class="n">H</span> <span class="ow">and</span> <span class="n">Rosenthal</span><span class="p">,</span> <span class="n">Sara</span> <span class="n">Brin</span> <span class="ow">and</span> <span class="n">P</span><span class="p">{</span>\<span class="s">'e}rez, Fernando and others},
  journal={arXiv preprint arXiv:1810.08055},
  year={2018}
}
          
@online{literateprogramming,
    author    = "Donald Knuth",
    title     = "Knuth: Literate Programming",
    url       = "http://www.literateprogramming.com/index.html",
    keywords  = "latex,knuth"
}          
</span></code></pre></div></div>

<p>Including a citation in the text uses a simple format of calling \cite{rule2018ten} command  \cite{literateprogramming}</p>

<h1 id="the-methods">The Methods</h1>

<p>Research methods describe the steps taken to investigate a research problem, and the rationale for using specific procedures and techniques to identify, select, process, transform and analyze data to explain the problem, thereby allowing readers to critically evaluate a study’s validity and reliability.</p>

<p>Methodology sections of research papers answer two main questions:</p>
<h2 id="how-were-the-data-collected-or-generated">How were the data collected or generated?</h2>

<p>Include a data overview that has the following information</p>
<ul>
  <li>Where is the data from</li>
  <li>Sample size</li>
  <li>Group/condition of intrest</li>
  <li>A full description of the other covariates of intrest</li>
  <li>What metrics are you using and how were they extracted</li>
</ul>

<h2 id="what-kind-of-analysis-was-done">What kind of analysis was done?</h2>
<p>Include a method section that has the following information</p>
<ul>
  <li>What are the different methods used in this report</li>
  <li>Briefly explain what they do and why they will be suitable for you to answer your questions.</li>
  <li>Cite the method in citations to allow anyone who is unfamiliar with it to learn more about it.</li>
  <li>If this method was used previously to answer a similar problem consider citing that paper as rationale of usage.</li>
</ul>

<p>Write in the past tense and be direct and precise.</p>

<h1 id="the-results">The Results</h1>

<p>You present the results of your study in the results section based on the methods (or methods) you used to gather evidence to support  your questions or observations.</p>

<p>Presented results must follow a  logical sequence without bias  or interpretation.</p>

<p>It is possible to link your results to previous findings that put your results in context and potentially lead to the next section of results.</p>

<p>This section should include both tables and figures as means of supporting your claims.</p>

<h1 id="the-discussionconclusion">The Discussion/Conclusion</h1>

<p>Describe any new insights you’ve gained while studying the problem and explain how that relates to your findings in your conclusion. You’ll always tie the discussion back to the introduction by talking about your research questions or hypotheses and the literature you read. The discussion doesn’t just repeat the first part of your paper; it tells the reader how your study added to their understanding of the research problem from where you left off at the  end of your review of prior research.</p>

<p>You should include a limitation section in which you discuss limitations in the design, methodology, or interpretation of the results. It refers to any challenges arising from unanticipated challenges, limited data, computational resources, or any other issue that you feel should be raised that can limit the generalizability, application, or utility of the study findings.</p>

<h1 id="importing-packagesconstants-and-style">Importing packages,constants and style</h1>
<p>Reports containing data-driven analysis and visualization will include a code cell (usually the first cell) in which we import packages, define constants, and define figure styles.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="n">CURRENT_TIME</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%d-%m-%y_%H:%M"</span><span class="p">)</span>
<span class="n">AUTHOR</span> <span class="o">=</span> <span class="s">'ES'</span>


<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Markdown</span><span class="p">,</span><span class="n">Latex</span><span class="p">,</span><span class="n">HTML</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="o">%</span><span class="n">load_ext</span> <span class="n">autoreload</span>
<span class="o">%</span><span class="n">autoreload</span> <span class="mi">2</span>
<span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="s">'bmh'</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="at-the-end-of-the-report-include-export-statement">At the end of the report include export statement</h1>
<p>The last cell should include a cell that generates the report, this allows you to change some parameters at the top and hopefully just run the notebook to produce the report.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">%%</span><span class="n">capture</span>
<span class="o">%%</span><span class="n">bash</span> <span class="o">-</span><span class="n">s</span> <span class="s">"$CURRENT_TIME"</span> <span class="s">"$AUTHOR"</span>
<span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="n">pdf</span> 
<span class="n">jupyter</span> <span class="n">nbconvert</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="nb">input</span> <span class="o">--</span><span class="n">output</span> <span class="n">pdf</span><span class="o">/</span><span class="n">some_notebook_</span><span class="err">$</span><span class="mi">1</span><span class="n">_</span><span class="err">$</span><span class="mf">2.</span><span class="n">pdf</span> <span class="o">--</span><span class="n">config</span> <span class="n">cfg</span><span class="p">.</span><span class="n">py</span>  <span class="n">some_notebook</span><span class="p">.</span><span class="n">ipynb</span>
</code></pre></div></div>

<h2 id="lets-unpack">Let’s unpack</h2>

<ol>
  <li>First, we use the magic command <code class="language-plaintext highlighter-rouge">%%capture</code> to capture the bash output and ensure it is not included in the report</li>
  <li>Next, we use the magic command <code class="language-plaintext highlighter-rouge">%%bash</code> with the <code class="language-plaintext highlighter-rouge">-s</code> option to pass variables from the Python scope to bash</li>
  <li>We create the <em>pdf</em> output folder using <code class="language-plaintext highlighter-rouge">mkdir -p pdf</code>
Then we call: 
  -<code class="language-plaintext highlighter-rouge">jupyter nbconvert</code> to call the pipeline for nbconvert
    <ul>
      <li>with nbconvert’s <code class="language-plaintext highlighter-rouge">--no-input</code> option, which tells it to ignore the code cells in  the notebook</li>
      <li>This allows me to explicitly specify where and under what name my report will appear</li>
      <li>I provide the name <code class="language-plaintext highlighter-rouge">pdf/</code> to indicate the report should be saved in the pdf  folder</li>
      <li>The output file is given the name <code class="language-plaintext highlighter-rouge">some_notebook_$1_$2.pdf</code></li>
    </ul>
    <ul>
      <li>where <code class="language-plaintext highlighter-rouge">$1</code> is the first  variable <code class="language-plaintext highlighter-rouge">CURRENT_TIME</code></li>
      <li>and <code class="language-plaintext highlighter-rouge">$2</code> is the <code class="language-plaintext highlighter-rouge">AUTHOR</code> variable
      - Then I use <code class="language-plaintext highlighter-rouge">--config cfg.py</code> to tell the program to use the  configuration file we previously created 
      - Lastly, I tell the program which notebook to convert</li>
    </ul>
  </li>
</ol>

<p>Our focus this week was on style, from next week we will shift to content, implicitly assuming that style is covered</p>

        
      </section>

      <footer class="page__meta">
        
        


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://localhost:4000/tags/#latex" class="page__taxonomy-item" rel="tag">latex</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#notebooks" class="page__taxonomy-item" rel="tag">notebooks</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#reproducible-notebook" class="page__taxonomy-item" rel="tag">reproducible notebook</a>
    
    </span>
  </p>




      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/posts/2021/06/ipynb2pdf/" class="btn btn--twitter" title="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/posts/2021/06/ipynb2pdf/" class="btn btn--facebook" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/posts/2021/06/ipynb2pdf/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/@e_soreq"><i class="fab fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/esoreq"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Eyal Soreq. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

