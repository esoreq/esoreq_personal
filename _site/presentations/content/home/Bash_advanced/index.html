

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Some Advanced Bash - Eyal Soreq</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Eyal Soreq">
<meta property="og:title" content="Some Advanced Bash">


  <link rel="canonical" href="http://localhost:4000/presentations/content/home/Bash_advanced/">
  <meta property="og:url" content="http://localhost:4000/presentations/content/home/Bash_advanced/">





  <meta name="twitter:site" content="@e_soreq">
  <meta name="twitter:title" content="Some Advanced Bash">
  <meta name="twitter:description" content="personal description">
  <meta name="twitter:url" content="http://localhost:4000/presentations/content/home/Bash_advanced/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  












  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Eyal Soreq",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Eyal Soreq Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="http://localhost:4000/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="http://localhost:4000/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="http://localhost:4000/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="http://localhost:4000/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="http://localhost:4000/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="http://localhost:4000/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="http://localhost:4000/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="http://localhost:4000/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="http://localhost:4000/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="http://localhost:4000/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.css"/>

<script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script>

<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/">Eyal Soreq</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/teaching/">Teaching</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/year-archive/">Blog Posts</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="http://localhost:4000/images/profile.png" class="author__avatar" alt="Eyal Soreq Ph.D.">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Eyal Soreq Ph.D.</h3>
    <p class="author__bio">I apply and develop machine learning and data science methods to improve our understanding of dementia related behavioral patterns</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
      
      
      
      
       
      
        <li><a href="https://twitter.com/e_soreq"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
      
      
      
      
      
        <li><a href="https://github.com/esoreq"><i class="fab fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://scholar.google.com/citations?view_op=list_works&hl=en&user=_COL8loAAAAJ"><i class="fas fa-fw fa-graduation-cap"></i> Google Scholar</a></li>
      
      
        <li><a href="https://pubmed.ncbi.nlm.nih.gov/?term=Soreq+E&sort=pubdate"><i class="ai ai-pubmed-square ai-fw"></i> PubMed</a></li>
      
      
        <li><a href="https://orcid.org/0000-0003-4809-4889"><i class="ai ai-orcid-square ai-fw"></i> ORCID</a></li>
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Some Advanced Bash">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Some Advanced Bash
</h1>
          
        
        
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
        <h1 id="some-advanced-bash">Some Advanced Bash</h1>

<ul>
  <li>In this section we will cover how to create custom commands (aliases), allowing you to create shortcuts for a single command or a group of commands.</li>
  <li>We will also learn how to configure your personal home account on the cluster</li>
  <li>How to log on the cluster using the terminal</li>
  <li>And how to transfer files from and to the cluster using rsync</li>
</ul>

<hr />

<!-- .slide: id="alias" -->

<h2 id="alias">alias</h2>

<ul>
  <li>A shell alias is a shortcut to reference a command. It can be used to avoid typing long commands or as a means to correct incorrect input. For common patterns it can reduce keystrokes and improve efficiency.</li>
  <li>Think about complex commands that you use a lot, or even simple commands with common used options.</li>
  <li>The format is simple and I will go over some of my favorite (Copy the ones you like)</li>
</ul>

<hr />

<h2 id="alias---examples">alias - examples</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias</span> <span class="c"># list all current aliases</span>
<span class="nb">alias rm</span><span class="o">=</span><span class="s1">'rm -i'</span> <span class="c"># Will ask permission before deleting files.</span>
<span class="nb">alias cp</span><span class="o">=</span><span class="s1">'cp -i'</span> <span class="c"># Will ask permission before overwriting files.</span>
<span class="nb">alias mv</span><span class="o">=</span><span class="s1">'mv -i'</span> <span class="c"># Will ask permission before overwriting files.</span>
<span class="nb">alias </span><span class="nv">cpv</span><span class="o">=</span><span class="s1">'rsync -ah --info=progress2'</span> <span class="c"># a fancy copy</span>
<span class="nb">alias </span><span class="nv">sr</span><span class="o">=</span><span class="s1">'sort -hr'</span> <span class="c"># sort reverse.</span>
</code></pre></div></div>

<hr />

<h2 id="alias---examples--cont">alias - examples  (cont.)</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias mkdir</span><span class="o">=</span><span class="s1">'mkdir -p'</span>
<span class="nb">alias </span><span class="nv">h</span><span class="o">=</span><span class="s1">'history'</span>
<span class="nb">alias </span><span class="nv">hg</span><span class="o">=</span><span class="s1">'history|grep'</span>
<span class="nb">alias</span> ..<span class="o">=</span><span class="s1">'cd ..'</span>
<span class="nb">alias du</span><span class="o">=</span><span class="s1">'du -kh'</span>    
<span class="nb">alias </span><span class="nv">dt</span><span class="o">=</span><span class="s1">'du -sh * | sr'</span>
</code></pre></div></div>

<hr />

<h2 id="alias---examples--cont-1">alias - examples  (cont.)</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias ls</span><span class="o">=</span><span class="s1">'ls -h --color'</span>
<span class="nb">alias </span><span class="nv">ll</span><span class="o">=</span><span class="s2">"ls -lv --group-directories-first"</span>
<span class="nb">alias </span><span class="nv">lm</span><span class="o">=</span><span class="s1">'ll | more'</span>       <span class="c">#  Pipe through 'more'</span>
<span class="nb">alias </span><span class="nv">lr</span><span class="o">=</span><span class="s1">'ll -R'</span>           <span class="c">#  Recursive ls.</span>
<span class="nb">alias </span><span class="nv">la</span><span class="o">=</span><span class="s1">'ll -A'</span>           <span class="c">#  Show hidden files.</span>
<span class="nb">alias </span><span class="nv">lx</span><span class="o">=</span><span class="s1">'ll -XB'</span>          <span class="c">#  Sort by extension.</span>
<span class="nb">alias </span><span class="nv">lk</span><span class="o">=</span><span class="s1">'ll -Sr  | sr'</span>    <span class="c">#  Sort by size, biggest first.</span>
<span class="nb">alias </span><span class="nv">lt</span><span class="o">=</span><span class="s1">'ll -tr  | sr'</span>    <span class="c">#  Sort by date, most recent first.</span>
</code></pre></div></div>

<hr />

<h2 id="dotfile">.dotfile</h2>

<ul>
  <li>If you followed so far you should be able to do the following:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~ <span class="c"># go to home dir</span>
<span class="nb">ls</span> <span class="c"># list files </span>
la <span class="c"># use our new flashy alias to list files </span>
</code></pre></div></div>

<ul>
  <li>The two list should be different, with the latter containing dotfiles, that are normally hidden.</li>
  <li>Dotfiles are used by different programs to store important information that dramatically changes your system (therefore handle with care).</li>
</ul>

<hr />

<h2 id="profile">.profile</h2>

<ul>
  <li>A <em>.profile</em> file stores user specific environment and startup programs configurations and is loaded each time a shell is created.</li>
  <li>In the GWDG HPC you don’t have a .profile file by default.</li>
  <li>Let’s create it and add into it some crucial code.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.profile 
<span class="c"># will create the empty .profile and open a text editor</span>
</code></pre></div></div>

<hr />

<h2 id="profile-1">.profile</h2>

<ul>
  <li>This should look like this</li>
</ul>

<p><img src="/img/Tutorial_nano.png" alt="" /></p>

<hr />

<h2 id="profile-2">.profile</h2>

<ul>
  <li>Copy and paste this piece of code and close and save using CTRL+X</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> /etc/bashrc <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">.</span> /etc/bashrc <span class="c"># --&gt; source global /etc/bashrc, if present.</span>
<span class="k">fi
if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="nb">.</span> ~/.bashrc <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">.</span> ~/.bashrc <span class="c"># --&gt; source local ~/.bashrc, if present.</span>
<span class="k">fi</span>    
</code></pre></div></div>

<hr />

<h2 id="bashrc">.bashrc</h2>

<ul>
  <li>
    <p>What we just did was to tell the cluster to source (i.e. load into memory) both global (/etc/bashrc) and local .bashrc files every time a bash shell is created.</p>
  </li>
  <li>
    <p>Lets open our local .bashrc file and add some functionality to it.</p>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.bashrc 
</code></pre></div></div>

<hr />

<h2 id="bashrc-1">.bashrc</h2>

<ul>
  <li>So now we are going to create a conditional statement that will source some files to memory</li>
  <li>The conditional statement below will only run if the file exists</li>
  <li>Using a dot before a file is shorthand to source command</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/bin:<span class="nv">$PATH</span> <span class="c"># Add local bin to $PATH </span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> ~/.bash_aliases <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">.</span> ~/.bash_aliases   <span class="c"># --&gt; source local aliases if present.</span>
<span class="k">fi</span>
</code></pre></div></div>

<hr />

<h2 id="bash_aliases">.bash_aliases</h2>

<ul>
  <li>We already know what aliases are.</li>
  <li>However, it is important to understand that the aliases you created will only exist as long as the shell is open.</li>
  <li>For them to be present any time you log on to the cluster we need to source them every time.</li>
  <li>The code we just wrote will source the file .bash_aliases if it exists whenever you open a shell.</li>
  <li>So let’s create this file and append two aliases</li>
  <li>Feel free to use nano and copy over as many aliases if you like</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch</span> ~/.bash_aliases  <span class="c"># create the file </span>
<span class="nb">echo</span> <span class="s2">"alias ls='ls -h --color'"</span> <span class="o">&gt;&gt;</span> ~/.bash_aliases 
<span class="nb">echo</span> <span class="s2">"alias hg='history|grep'"</span> <span class="o">&gt;&gt;</span> ~/.bash_aliases 
</code></pre></div></div>

<hr />

<h2 id="ssh">ssh</h2>

<ul>
  <li>To verify that this works we need to exit the terminal or alternatively open a new one.</li>
  <li>We could just use the web interface to spawn a new terminal</li>
  <li>Alternatively we could use Secure Shell (ssh) to log on to the cluster from our personal computer</li>
  <li>This is important as some times we would like to copy data to and from the cluster and the simplest way to achieve that is by using a terminal.</li>
  <li>Go over to <a href="https://info.gwdg.de/docs/doku.php?id=en:services:application_services:high_performance_computing:connect_with_ssh">CONNECT WITH SSH</a> and follow the instructions there.</li>
</ul>

<hr />
<!-- .slide: id="ssh_login" -->

<h2 id="ssh-key">ssh Key</h2>

<ul>
  <li>To simplify connectivity between computers we use an Rivest–Shamir–Adleman (rsa) key which creates a two key system to allow secure data transmission (and avoid needing a password)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># On your personal computer generate your rsa </span>
ssh-keygen <span class="nt">-t</span> rsa 
<span class="c"># Copy it over to the cluster </span>
ssh-copy-id &lt;user_id&gt;@gwdu101.gwdg.de 
<span class="c"># Check by login in </span>
ssh  &lt;user_id&gt;@gwdu101.gwdg.de
<span class="c"># And log out </span>
<span class="nb">logout</span> 
</code></pre></div></div>

<hr />

<!-- .slide: id="rsync" -->

<h2 id="rsync">rsync</h2>

<ul>
  <li>Rsync is a fast and extraordinarily versatile file copying tool.</li>
  <li>We are going to learn how to use it with the following steps:
    <ul>
      <li>Copy to your personal computer your .bash_aliases file</li>
      <li>Edit it locally (using any software you like)</li>
      <li>Transfer it back and overwrite the previous copy</li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="rsync---pull-a-file-from-the-remote-server">rsync - pull a file from the remote server</h2>

<ul>
  <li>Lets copy our file from the cluster - this is called pulling a file</li>
  <li>Open a terminal in your personal computer, create and goto your own sandbox folder</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> ~/sandbox
<span class="nb">cd</span> ~/sandbox
rsync &lt;user_id&gt;@gwdu101.gwdg.de:.bash_aliases .bash_aliases
<span class="nb">cat</span> .bash_aliases
</code></pre></div></div>

<hr />

<h2 id="rsync---push-a-file-to-the-remote-server">rsync - push a file to the remote server</h2>

<ul>
  <li>Add a new alias to your file</li>
  <li>Then push the file to your home directory and overwrite to old one</li>
  <li>The push syntax is identical to the pull with the source and destination flipped</li>
  <li>We will confirm by passing a command to the cluster using ssh</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"alias la='ll -A'"</span> <span class="o">&gt;&gt;</span> .bash_aliases 
rsync .bash_aliases &lt;user_id&gt;@gwdu101.gwdg.de:.bash_aliases 
ssh  esoreq@gwdu101.gwdg.de <span class="s2">"cat ~/.bash_aliases"</span>
</code></pre></div></div>

<hr />

<h2 id="summary">Summary</h2>

<ul>
  <li>In this section we covered more advanced topics
    <ul>
      <li>We learned to log on to the cluster using ssh</li>
      <li>We created aliases to simplify our workflow</li>
      <li>And learned to copy from and to the cluster</li>
    </ul>
  </li>
  <li>As you progress in your understanding you will find that interacting with the cluster is most efficient via the terminal.</li>
  <li>However, in terms of reproducibility (and especially for beginners) it is better to use the Jupyter framework we will cover shortly</li>
  <li>Time to take a short break and move to setting up version control</li>
</ul>


        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      

      


    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/@e_soreq"><i class="fab fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/esoreq"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Eyal Soreq. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

